<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1"
    />
    <meta
      name="description"
      content="Desarrolla una moderna aplicaci√≥n web en Angular standalone, conectada a Firebase, para gestionar cursos virtuales."
    />
    <title>EduSmart - Gesti√≥n de Cursos Virtuales</title>

    <!-- Estilos Mobirise y Bootstrap -->
    <link
      rel="stylesheet"
      href="https://r.mobirisesite.com/1458871/assets/css/mbr-additional.css"
    />
    <!-- Fuente -->
  </head>

  <body>
    <!DOCTYPE html>
    <html lang="es">
      <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta
          name="viewport"
          content="width=device-width, initial-scale=1, minimum-scale=1"
        />
        <meta
          name="description"
          content="Desarrolla una moderna aplicaci√≥n web en Angular standalone, conectada a Firebase, para gestionar cursos virtuales."
        />
        <title>EduSmart - Gesti√≥n de Cursos Virtuales</title>

        <!-- Estilos Mobirise y Bootstrap -->
        <link
          rel="stylesheet"
          href="https://r.mobirisesite.com/1458871/assets/css/mbr-additional.css"
        />
        <!-- Fuente -->
      </head>

      <body>
        <div class="container-fluid">
          <div class="d-flex justify-content-between align-items-center mb-4">
            <h3 class="display-5">
              <strong>üìö Gesti√≥n de Cursos</strong>
            </h3>
            <button
              class="btn btn-primary"
              (click)="abrirFormularioNuevo()"
              *ngIf="!mostrarFormulario"
            >
              ‚ûï Nuevo Curso
            </button>
          </div>

          <!-- Formulario -->
          <div *ngIf="mostrarFormulario" class="card">
            <div class="card-header">
              <h5>
                {{ cursoEditando ? "‚úèÔ∏è Editar Curso" : "‚ûï Crear Nuevo Curso" }}
              </h5>
            </div>
            <div class="card-body">
              <form (ngSubmit)="guardarCurso()">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label class="form-label">T√≠tulo del Curso *</label>
                    <input
                      type="text"
                      class="form-control"
                      [(ngModel)]="nuevoCurso.titulo"
                      name="titulo"
                      placeholder="Ej: Matem√°ticas Avanzada"
                      required
                    />
                    <small class="text-muted">Nombre del curso</small>
                  </div>

                  <div class="col-md-6 mb-3">
                    <label class="form-label">Categor√≠a *</label>
                    <select
                      class="form-select"
                      [(ngModel)]="nuevoCurso.categoria"
                      name="categoria"
                      required
                    >
                      <option value="">-- Selecciona una categor√≠a --</option>
                      <option value="Matem√°ticas">Matem√°ticas</option>
                      <option value="Ciencias">Ciencias</option>
                      <option value="Lenguaje">Lenguaje</option>
                      <option value="Historia">Historia</option>
                      <option value="Idiomas">Idiomas</option>
                      <option value="Tecnolog√≠a">Tecnolog√≠a</option>
                      <option value="Arte">Arte</option>
                      <option value="Educaci√≥n F√≠sica">Educaci√≥n F√≠sica</option>
                      <option value="Otro">Otro</option>
                    </select>
                    <small class="text-muted"
                      >Selecciona la categor√≠a del curso</small
                    >
                  </div>

                  <div class="col-md-12 mb-3">
                    <label class="form-label">Descripci√≥n</label>
                    <textarea
                      class="form-control"
                      [(ngModel)]="nuevoCurso.descripcion"
                      name="descripcion"
                      placeholder="Descripci√≥n detallada del curso..."
                      rows="4"
                    ></textarea>
                    <small class="text-muted"
                      >Proporciona una descripci√≥n clara del contenido</small
                    >
                  </div>

                  <div class="col-md-6 mb-3">
                    <label class="form-label">URL de Imagen</label>
                    <input
                      type="url"
                      class="form-control"
                      [(ngModel)]="nuevoCurso.imagenUrl"
                      name="imagenUrl"
                      placeholder="https://ejemplo.com/imagen.jpg"
                    />
                    <small class="text-muted"
                      >Enlace a la imagen del curso</small
                    >
                    <img
                      *ngIf="nuevoCurso.imagenUrl"
                      [src]="nuevoCurso.imagenUrl"
                      alt="Preview"
                      class="img-preview mt-2"
                      onerror="this.style.display='none'"
                    />
                  </div>

                  <div class="col-md-6 mb-3">
                    <label class="form-label">Duraci√≥n (horas) *</label>
                    <input
                      type="number"
                      class="form-control"
                      [(ngModel)]="nuevoCurso.duracion"
                      name="duracion"
                      placeholder="Ej: 40"
                      min="1"
                      required
                    />
                    <small class="text-muted">Horas totales del curso</small>
                  </div>
                </div>

                <div class="d-flex gap-2">
                  <button type="submit" class="btn btn-success">
                    {{ cursoEditando ? "üîÑ Actualizar" : "‚úÖ Crear" }}
                  </button>
                  <button
                    type="button"
                    class="btn btn-secondary"
                    (click)="cerrarFormulario()"
                  >
                    ‚ùå Cancelar
                  </button>
                </div>
              </form>
            </div>
          </div>

          <!-- Cargando -->
          <div *ngIf="cargando" class="alert alert-info">
            ‚è≥ Cargando cursos...
          </div>

          <!-- Sin cursos -->
          <div
            *ngIf="!cargando && cursos.length === 0"
            class="alert alert-warning"
          >
            ‚ö†Ô∏è No hay cursos creados. ¬°Crea uno para comenzar!
          </div>

          <!-- Tabla de Cursos -->
          <div *ngIf="!cargando && cursos.length > 0" class="card">
            <div class="card-header">
              <h5>
                üìã Cursos Disponibles
                <span class="badge">{{ cursos.length }}</span>
              </h5>
            </div>
            <div class="table-responsive">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th>üìö T√≠tulo</th>
                    <th>üè∑Ô∏è Categor√≠a</th>
                    <th>‚è±Ô∏è Duraci√≥n (hrs)</th>
                    <th>üìÖ Fecha de Creaci√≥n</th>
                    <th>üìù Descripci√≥n</th>
                    <th>‚öôÔ∏è Acciones</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let curso of cursos">
                    <td>
                      <strong>{{ curso.titulo }}</strong>
                    </td>
                    <td>
                      <span class="badge">
                        {{ curso.categoria }}
                      </span>
                    </td>
                    <td>
                      <span class="badge bg-success"
                        >{{ curso.duracion || 0 }} hrs</span
                      >
                    </td>
                    <td>
                      {{
                        curso.fechaCreacion
                          ? (curso.fechaCreacion | date : "short")
                          : (curso.fechaCreacion | date : "short")
                      }}
                    </td>
                    <td>
                      <small class="text-muted">
                        {{ curso.descripcion.substring(0, 50) || "-" }}...
                      </small>
                    </td>
                    <td>
                      <button
                        class="btn btn-sm btn-warning"
                        (click)="abrirFormularioEditar(curso)"
                        title="Editar curso"
                      >
                        ‚úèÔ∏è
                      </button>
                      <button
                        class="btn btn-sm btn-danger"
                        (click)="eliminarCurso(curso.id)"
                        title="Eliminar curso"
                      >
                        üóëÔ∏è
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </body>
    </html>
  </body>
</html>
