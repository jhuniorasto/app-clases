<div class="container">
  <div class="d-flex align-items-center justify-content-between mb-4">
    <h3 class="display-5"><strong>Gestión de Cursos</strong></h3>
    <div>
      <button class="btn btn-primary" (click)="abrirModal()">Agregar Curso</button>
    </div>
  </div>

  <div class="grid-cursos">
    <div *ngFor="let curso of cursos">
      <div class="curso-card">
        <div class="curso-imagen">
          <img [src]="curso.imagenUrl || imagenPorDefecto" alt="Curso" />
        </div>
        <div class="curso-body">
          <div>
            <h4 class="curso-titulo">{{ curso.titulo }}</h4>
            <p class="curso-descripcion">{{ curso.descripcion }}</p>
          </div>

            <div class="curso-meta">
            <div class="curso-docente">{{ getDocenteNombre(curso.creadoPorUid) }}</div>
            <div class="curso-actions">
              <button class="btn btn-primary" [routerLink]="['/cursos/detalle-curso', curso.id]">Ver</button>
              <button class="btn btn-outline-secondary" *ngIf="!isEstudiante" [routerLink]="['/cursos/libro-notas', curso.id]">Libro</button>
              <button class="btn" *ngIf="!isEstudiante" (click)="seleccionarCurso(curso)"><i class="bi bi-pencil"></i></button>
              <button class="btn" *ngIf="!isEstudiante" (click)="eliminarCurso(curso.id)"><i class="bi bi-trash text-danger"></i></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para agregar/modificar curso -->
  <div class="modal-overlay" *ngIf="mostrarModal">
    <div class="modal-content">
      <h4 class="modal-title">{{ cursoSeleccionado ? 'Modificar Curso' : 'Agregar Curso' }}</h4>

      <form (ngSubmit)="confirmarAgregarCurso()">
        <div class="form-field">
          <input class="form-control" [(ngModel)]="nuevoCurso.titulo" name="titulo" placeholder="Título del curso" />
        </div>

        <div class="form-field">
          <input class="form-control" [(ngModel)]="nuevoCurso.categoria" name="categoria" placeholder="Categoría" />
        </div>

        <div class="form-field">
          <textarea class="form-control" [(ngModel)]="nuevoCurso.descripcion" name="descripcion" placeholder="Descripción del curso"></textarea>
        </div>

        <div class="form-field">
          <input class="form-control" [(ngModel)]="nuevoCurso.imagenUrl" name="imagenUrl" placeholder="URL de la imagen" />
        </div>

        <div class="form-field">
          <label class="form-label">Docente (buscar por nombre)</label>
          <app-typeahead [items]="profesores" displayField="nombre" valueField="uid" placeholder="Escribe para buscar..." (select)="selectProfesor($event)"></app-typeahead>
        </div>

        <div class="modal-buttons">
          <button type="button" class="btn cancelar" (click)="cerrarModal()" style="display:inline-block !important; visibility:visible !important; background:var(--accent) !important; color:#000000 !important; padding:.65rem 1.2rem; border-radius:8px; border:none;">Cancelar</button>
          <button type="submit" class="btn guardar" style="display:inline-block !important; visibility:visible !important; background:var(--accent) !important; color:#000000 !important; padding:.65rem 1.2rem; border-radius:8px; border:none;">Guardar</button>
        </div>
      </form>
    </div>
  </div>
</div>
